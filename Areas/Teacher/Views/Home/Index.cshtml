@{
    ViewData["Title"] = "Classes";

}

@using Hifz.DTOs
@using Hifz.Models.enums
@using Microsoft.CodeAnalysis.Scripting
@model List<Class>

@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer

<link rel="stylesheet" href="~/css/teacher/Index_Classes.css" asp-append-version="true" />
<div class="classes-container">
    <div class="classes-header">

        <i class='bx bx-group header-icon header-icon"'></i>
        <h1 class="classes-title">@Localizer["MyClasses"]</h1>
    </div>

    <div class="classes-grid">
        @foreach (var classItem in Model)
        {

            var genderClass = classItem.Gender.ToString().ToLower();

            <div class="class-card" data-class-id="@classItem.Id" data-class-name="@classItem.Name">
                <span class="status-badge" style="display:none">@Localizer["Active"]</span>

                <div class="class-card-content">
                    <h3 class="class-name">@classItem.Name</h3>

                    <div class="class-info-list">
                        <div class="class-info-item">
                            <svg class="info-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            <span>@GetFormattedTime(classItem.ClassTime)</span>
                        </div>

                        <div class="class-info-item">
                            <svg class="info-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" />
                                <path d="M3 10H21M8 2V6M16 2V6" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                            <span>@GetFormattedDays(classItem.ClassDays)</span>
                        </div>

                        <div class="class-info-item">
                            <svg class="info-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path
                                    d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M23 21V19C23 18.1645 22.7111 17.3736 22.2239 16.7329M16 3.12988C17.7699 3.58305 19 5.14814 19 7C19 8.85186 17.7699 10.417 16 10.8701"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <span>@classItem.Students.Count @Localizer["Students"]</span>
                        </div>
                    </div>

                    <div class="class-footer">
                        <span class="gender-badge gender-@genderClass">
                            @classItem.Gender
                        </span>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

@functions {


    private string GetFormattedTime(DateTime classTime)
    {
        var startTime = classTime.ToString("h:mm tt");
        var endTime = classTime.AddHours(2).ToString("h:mm tt");
        return $"{startTime} - {endTime}";
    }

    private string GetFormattedDays(ICollection<ClassDaysEnum> classDays)
    {
        if (!classDays.Any()) return Localizer["NoDaysSet"].Value;
        return string.Join(", ", classDays.Select(d => d.ToString()));
    }
}

@section Scripts {
    <script src="~/js/teacher_portal/Index.js"></script>
}