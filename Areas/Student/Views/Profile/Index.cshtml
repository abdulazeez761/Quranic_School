@model Hifz.Models.Student

@{
    ViewData["Title"] = "Profile";
}

<link rel="stylesheet" href="~/css/student/profile.css" asp-append-version="true" />

@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer

<div class="profile-container"
     dir="@(System.Globalization.CultureInfo.CurrentUICulture.Name.StartsWith("ar") ? "rtl" : "ltr")">
    <div class="profile-header">
        <i class='bx bx-user-circle header-icon'></i>
        <h1 class="profile-title">@Localizer["MyProfile"]</h1>
    </div>

    <div class="profile-content">
        <!-- Personal Information Section -->
        <div class="profile-section">
            <h2 class="section-title">
                <i class='bx bx-info-circle'></i>
                @Localizer["PersonalInformation"]
            </h2>
            <div class="info-grid">
                <div class="info-item">
                    <label>@Localizer["FullName"]</label>
                    <p>@Model.StudentInfo.FirstName @Model.StudentInfo.SecondName</p>
                </div>
                <div class="info-item">
                    <label>@Localizer["Username"]</label>
                    <p>@Model.StudentInfo.Username</p>
                </div>
                <div class="info-item">
                    <label>@Localizer["PhoneNumber"]</label>
                    <p>@Model.StudentInfo.PhoneNumber</p>
                </div>
                <div class="info-item">
                    <label>@Localizer["DateOfBirth"]</label>
                    <p>@Model.DateOfBirth.ToString("MMMM dd, yyyy")</p>
                </div>
                <div class="info-item">
                    <label>@Localizer["Gender"]</label>
                    <p>@Localizer[Model.sex.ToString()]</p>
                </div>
            </div>
        </div>

        <!-- Academic Progress Section -->
        <div class="profile-section">
            <h2 class="section-title">
                <i class='bx bx-book-bookmark'></i>
                @Localizer["AcademicProgress"]
            </h2>
            <div class="progress-grid">
                <div class="progress-card">
                    <div class="progress-icon">
                        <i class='bx bx-book-open'></i>
                    </div>
                    <div class="progress-info">
                        @{
                            var percent = (Model.MemorizedJuz / 30.0) * 100.0;
                        }
                        <label>@Localizer["MemorizedJuz"]</label>
                        <div class="progress-bar">
                            <div class="progress-fill"
                                 style="width: @(percent.ToString("F2", System.Globalization.CultureInfo.InvariantCulture))%">
                            </div>
                        </div>
                        <p class="progress-value">@Model.MemorizedJuz @Localizer["OutOf30Juz"]</p>
                    </div>
                </div>

                <div class="progress-card">
                    <div class="progress-icon">
                        <i class='bx bx-star'></i>
                    </div>
                    <div class="progress-info">
                        <label>@Localizer["TajwidLevel"]</label>
                        <p class="tajwid-level">@Localizer[Model.TajwidLevel.ToString()]</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Class Information Section -->
        @if (Model.Classes != null && Model.Classes.Any())
        {
            <div class="profile-section">
                <h2 class="section-title">
                    <i class='bx bx-group'></i>
                    @Localizer["EnrolledClasses"]
                </h2>
                <div class="classes-list">
                    @foreach (var classItem in Model.Classes)
                    {
                        <div class="class-item">
                            <div class="class-icon">
                                <i class='bx bx-book'></i>
                            </div>
                            <div class="class-details">
                                <h3>@classItem.Name</h3>
                                <p>@Localizer[classItem.Gender.ToString()]</p>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }

        <!-- Parent Information Section -->
        @if (Model.Parent != null)
        {
            <div class="profile-section">
                <h2 class="section-title">
                    <i class='bx bx-user'></i>
                    @Localizer["ParentInformation"]
                </h2>
                <div class="info-grid">
                    <div class="info-item">
                        <label>@Localizer["ParentName"]</label>
                        <p>@Model.Parent.ParentInfo.FirstName @Model.Parent.ParentInfo.SecondName</p>
                    </div>
                    <div class="info-item">
                        <label>@Localizer["ParentUsername"]</label>
                        <p>@Model.Parent.ParentInfo.Username</p>
                    </div>
                    <div class="info-item">
                        <label>@Localizer["ParentPhone"]</label>
                        <p>@Model.Parent.ParentInfo.PhoneNumber</p>
                    </div>
                </div>
            </div>
        }
    </div>
</div>