@model IEnumerable<Hifz.Models.Class>

@{
    ViewData["Title"] = Localizer["PageTitle"].Value;
}

@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer

@section Styles {
    <link rel="stylesheet" href="~/css/student/student-layout.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/student/meetings.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
}

<div class="meetings-container">
    <!-- Header -->
    <div class="meetings-header">
        <h1 class="meetings-title">
            <i class="bi bi-camera-video"></i>
            @Localizer["OnlineMeetings"]
        </h1>
        <p class="meetings-subtitle">@Localizer["JoinActiveMeetings"]</p>
    </div>

    <!-- Alert Messages -->
    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-triangle me-2"></i>@TempData["Error"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <!-- Meetings Grid -->
    @if (Model.Any())
    {
        <div class="meetings-grid">
            @foreach (var cls in Model)
            {
                <div class="meeting-card">
                    <div class="meeting-card-header">
                        <h3 class="class-name">@cls.Name</h3>
                        <span class="live-badge">
                            <span class="live-indicator"></span>
                            @Localizer["LiveNow"]
                        </span>
                    </div>
                    <div class="meeting-card-body">
                        <div class="meeting-info">
                            <div class="info-item">
                                <i class="bi bi-people"></i>
                                <span>@(cls.Students?.Count ?? 0) @Localizer["StudentsEnrolled"]</span>
                            </div>
                            <div class="info-item">
                                <i class="bi bi-person-badge"></i>
                                <span>@(cls.Teachers?.Count ?? 0) @Localizer["Teachers"]</span>
                            </div>
                            <div class="info-item">
                                <i class="bi bi-shield-check"></i>
                                <span>@Localizer["SecureConnection"]</span>
                            </div>
                        </div>
                        <a href="@Url.Action("Join", "Meeting", new { area = "Student", classId = cls.Id })" class="join-btn">
                            <i class="bi bi-box-arrow-in-right"></i>
                            @Localizer["JoinMeeting"]
                        </a>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <div class="empty-state">
            <i class="bi bi-camera-video-off"></i>
            <h3>@Localizer["NoActiveMeetings"]</h3>
            <p>@Localizer["NoActiveMeetingsDesc"]</p>
        </div>
    }
</div>